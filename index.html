<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Abdisalam Houssein Ibrahim — Portfolio (v2 animée)</title>
  <meta name="description" content="Portfolio de Abdisalam Houssein Ibrahim — Développeur. Projets, compétences, avis, contact WhatsApp et CV." />
  <meta property="og:title" content="Abdisalam Houssein Ibrahim — Portfolio" />
  <meta property="og:description" content="Projets, compétences, avis, contact WhatsApp et CV." />
  <meta property="og:type" content="website" />
  <meta name="theme-color" content="#e10600" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --red:#e10600; /* rouge principal */
      --red-2:#ff2d2d;
      --black:#0b0b0d; /* noir profond */
      --grey:#141419;
      --white:#f5f5f7; /* blanc doux */
      --muted:#bdbdc2;
      --card:#121217;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:22px;
      --glass: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:
      radial-gradient(1200px 800px at 80% -10%, rgba(225,6,0,.18), transparent 60%),
      radial-gradient(1000px 700px at -10% 110%, rgba(225,6,0,.12), transparent 60%),
      var(--black);
      color:var(--white);font-family:Poppins,system-ui,Segoe UI,Roboto,Arial,sans-serif;scroll-behavior:smooth}
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    .container{width:min(1200px,92vw);margin:0 auto}

    /* NAV */
    header{position:sticky;top:0;z-index:50;background:linear-gradient(180deg, rgba(11,11,13,.9), rgba(11,11,13,.55));backdrop-filter: blur(10px);border-bottom:1px solid rgba(255,255,255,.06)}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:38px;height:38px;border-radius:12px;background:conic-gradient(from 180deg,var(--red),var(--red-2),#ff7676,var(--red));box-shadow:0 8px 20px rgba(225,6,0,.35);position:relative;transform:rotate(0deg);transition:transform .6s ease}
    .logo:hover{transform:rotate(180deg)}
    .logo:after{content:"";position:absolute;inset:3px;border-radius:10px;background:#121217}
    .brand strong{font-weight:800;letter-spacing:.3px}
    nav ul{list-style:none;display:flex;gap:18px;margin:0;padding:0}
    nav a{padding:8px 12px;border-radius:12px;opacity:.9}
    nav a:hover{background:rgba(225,6,0,.12);opacity:1}

    .btn{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:14px;border:1px solid rgba(255,255,255,.08);background:#141419;box-shadow:var(--shadow);font-weight:600;cursor:pointer;transform:translateZ(0);transition:transform .15s ease, box-shadow .2s ease}
    .btn:hover{transform:translateY(-2px)}
    .btn.primary{background:linear-gradient(135deg, var(--red), var(--red-2));border:none}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.15)}

    /* HERO */
    .hero{display:grid;grid-template-columns:1.25fr .9fr;gap:28px;align-items:center;padding:64px 0 30px}
    .kicker{font-size:.9rem;color:var(--muted);letter-spacing:.25px}
    h1{font-size:clamp(34px,5.6vw,56px);line-height:1.02;margin:6px 0;background:linear-gradient(90deg,#fff, #ffdede);-webkit-background-clip:text;background-clip:text;color:transparent}
    .typed{display:inline-block;min-height:1.2em;border-right:2px solid var(--red);padding-right:6px;white-space:nowrap}
    .hero p{color:#d8d8dc;opacity:.9}
    .cta{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .profile{position:relative;perspective:1000px}
    .profile .frame{border-radius:22px;overflow:hidden;background:linear-gradient(180deg,#1a1a1f, #0f0f12);padding:12px;border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);transform-style:preserve-3d}
    .profile img{width:100%;aspect-ratio:4/5;object-fit:cover;border-radius:16px;filter:saturate(1.05) contrast(1.02)}
    .badge{position:absolute;bottom:-10px;left:-10px;background:var(--red);color:#fff;padding:10px 14px;border-radius:12px;box-shadow:var(--shadow);font-weight:700}

    /* Sections */
    section{padding:42px 0}
    .section-title{display:flex;align-items:center;gap:10px;margin-bottom:16px}
    .section-title .dot{width:10px;height:10px;border-radius:50%;background:var(--red);box-shadow:0 0 0 6px rgba(225,6,0,.15)}
    h2{margin:0;font-size:clamp(22px,3.6vw,34px)}
    .cards{display:grid;grid-template-columns:repeat(12,1fr);gap:14px}
    .card{grid-column:span 4;background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:18px;padding:16px;box-shadow:var(--shadow);transition:transform .2s ease, border-color .2s ease, box-shadow .2s ease;background-image:var(--glass)}
    .card:hover{transform:translateY(-4px);border-color:rgba(225,6,0,.35);box-shadow:0 20px 50px rgba(225,6,0,.15)}

    /* Skills */
    .skill{display:grid;grid-template-columns:1fr auto;align-items:center;margin:10px 0}
    .bar{grid-column:1/-1;height:10px;background:#16161c;border-radius:20px;margin-top:6px;overflow:hidden}
    .bar > i{display:block;height:100%;width:0;background:linear-gradient(90deg, var(--red), var(--red-2));border-radius:20px}

    /* Projects grid */
    .project{position:relative;overflow:hidden;border-radius:16px;background:#0f0f12}
    .project img{width:100%;height:180px;object-fit:cover;opacity:.92;transition:transform .4s ease}
    .project:hover img{transform:scale(1.06)}
    .project .info{padding:12px}
    .project .tags{display:flex;gap:8px;flex-wrap:wrap}
    .tag{font-size:.75rem;padding:6px 8px;border-radius:999px;background:rgba(225,6,0,.14);border:1px solid rgba(225,6,0,.25)}
    .project .actions{display:flex;gap:10px; margin-top:10px}

    /* Timeline */
    .timeline{position:relative;margin-left:8px}
    .timeline:before{content:"";position:absolute;left:10px;top:0;bottom:0;width:2px;background:linear-gradient(var(--red), transparent)}
    .t-item{position:relative;padding-left:34px;margin:16px 0}
    .t-item:before{content:"";position:absolute;left:4px;top:6px;width:14px;height:14px;border-radius:50%;background:var(--red);box-shadow:0 0 0 8px rgba(225,6,0,.15)}

    /* Contact */
    form{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    form input, form textarea{background:#111117;border:1px solid rgba(255,255,255,.08);padding:12px 14px;color:#fff;border-radius:12px;font:inherit}
    form textarea{grid-column:1/-1;min-height:120px}

    /* Avis */
    #reviews .review-form{display:grid;grid-template-columns:1fr auto;gap:10px;margin-top:10px}
    #reviews textarea{grid-column:1/-1;min-height:90px}
    .stars{display:flex;gap:4px;cursor:pointer}
    .stars button{background:transparent;border:none;font-size:22px;filter:drop-shadow(0 2px 6px rgba(0,0,0,.35))}
    .reviews-list{margin-top:16px;display:grid;gap:10px}
    .review-item{background:#101015;border:1px solid rgba(255,255,255,.06);border-radius:14px;padding:12px}
    .note{font-size:14px;color:#ffdf6e}
    .avg{display:flex;align-items:center;gap:10px}

    /* Mini navigateur */
    .browser{border:1px solid rgba(255,255,255,.08);border-radius:16px;overflow:hidden;background:#0e0e12;box-shadow:var(--shadow)}
    .browser .bar{display:flex;gap:8px;align-items:center;padding:10px;border-bottom:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,#16161c,#0e0e12)}
    .browser input[type=url]{flex:1;background:#0b0b10;border:1px solid rgba(255,255,255,.08);color:#fff;border-radius:10px;padding:10px}
    .browser iframe{display:block;width:100%;height:380px;background:#0c0c10;border:0}

    /* Back to top */
    #toTop{position:fixed;right:16px;bottom:16px;z-index:40;display:none}

    /* Reveal */
    [data-reveal]{opacity:0;transform:translateY(10px);transition:all .6s cubic-bezier(.2,.65,.2,1)}
    [data-reveal].visible{opacity:1;transform:none}

    /* Floating blobs */
    .blobs{position:fixed;inset:0;z-index:-1;pointer-events:none}
    .blob{position:absolute;filter:blur(40px);opacity:.18;mix-blend-mode:screen}
    .b1{background:radial-gradient(400px 300px at center, var(--red), transparent 70%);width:600px;height:600px;top:-160px;right:-120px;animation:float 12s ease-in-out infinite}
    .b2{background:radial-gradient(400px 300px at center, var(--red-2), transparent 70%);width:500px;height:500px;bottom:-120px;left:-120px;animation:float 16s ease-in-out infinite reverse}
    @keyframes float{50%{transform:translateY(20px)}}

    /* Responsive */
    @media (max-width: 980px){.hero{grid-template-columns:1fr;gap:18px}}
    @media (max-width: 900px){.card{grid-column:span 6} footer{flex-direction:column;align-items:flex-start}}
    @media (max-width: 600px){.card{grid-column:span 12} form{grid-template-columns:1fr} .browser iframe{height:300px}}
  </style>
</head>
<body>
  <div class="blobs" aria-hidden="true">
    <div class="blob b1"></div>
    <div class="blob b2"></div>
  </div>

  <header>
    <div class="container nav">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <strong>Abdisalam Houssein Ibrahim</strong>
          <div class="kicker">Développeur • Djibouti</div>
        </div>
      </div>
      <nav aria-label="Navigation primaire">
        <ul>
          <li><a href="#about">À propos</a></li>
          <li><a href="#skills">Compétences</a></li>
          <li><a href="#projects">Projets</a></li>
          <li><a href="#reviews">Avis</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- HERO -->
    <section class="hero" id="home">
      <div>
        <div class="kicker">Bonjour 👋 je suis</div>
        <h1>Abdisalam Houssein Ibrahim</h1>
        <p class="kicker"><span class="typed" id="typing"></span></p>
        <p>Développeur passionné, avec une <strong>Licence en Génie Informatique (Programmation)</strong> à l’<strong>Institut Africain de Djibouti</strong>. J’aime construire des solutions web modernes, rapides et élégantes.</p>
        <div class="cta">
          <a class="btn primary" id="cvBtn" href="Abdisalam.pdf" download>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v12m0 0 4-4m-4 4-4-4M4 21h16" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
            Télécharger mon CV
          </a>
          <button class="btn ghost" id="whatsBtn" type="button">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M3 20l1.7-4.6A8 8 0 1011.9 21 8.5 8.5 0 018.4 20L3 20z" stroke="#fff" stroke-width="1.4"/><path d="M16.6 14.2c-.2.6-1.2 1-1.7.9-.5-.1-1.1-.3-2-.8-1.7-1-2.8-2.7-3.3-3.2-.4-.4-.7-1.1-.6-1.7.1-.5.6-1.4.9-1.6.2-.2.5-.2.6-.2h.4c.1 0 .3 0 .4.3.2.6.6 1.4.7 1.5.1.2.1.3 0 .5-.1.2-.2.3-.4.6-.1.2-.3.5-.2.7.1.2.5.9 1.2 1.4.8.6 1.4.8 1.6.9.2.1.4.1.6 0 .2-.1.9-.5 1-.6.1-.1.3-.1.5 0s1.3.6 1.5.7c.2.1.3.1.4.2 0 .2-.1.8-.3 1.1z" fill="#fff"/></svg>
            WhatsApp
          </button>
        </div>
      </div>
      <div class="profile" aria-label="Photo de profil">
        <div class="frame" id="tilt">
          <img id="avatar" src="image.jpg" alt="Portrait d'Abdisalam" />
        </div>
        <div class="badge">+253 77 29 89 53</div>
        <input type="file" id="fileInput" accept="image/*" hidden>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" data-reveal>
      <div class="section-title"><span class="dot"></span><h2>À propos</h2></div>
      <p>Développeur front & back, j’aime transformer les idées en applications propres et efficaces. Mon focus : performance, accessibilité, animations soignées et une expérience utilisateur impeccable.</p>
      <div class="cards" style="margin-top:12px">
        <div class="card" aria-label="Contact">
          <strong>Contact direct</strong>
          <p style="margin:8px 0 0 0">📧 abdisalamhoussein771@gmail.com<br/>📞 +253 77 29 89 53</p>
        </div>
        <div class="card" aria-label="Localisation">
          <strong>Localisation</strong>
          <p style="margin:8px 0 0 0">Djibouti-ville • Djibouti</p>
        </div>
        <div class="card" aria-label="Diplôme">
          <strong>Diplôme</strong>
          <p style="margin:8px 0 0 0">Licence en Génie Informatique (Programmation) — Institut Africain de Djibouti</p>
        </div>
      </div>
    </section>

    <!-- SKILLS -->
    <section id="skills" data-reveal>
      <div class="section-title"><span class="dot"></span><h2>Compétences</h2></div>
      <div class="cards">
        <div class="card">
          <h3>Frontend</h3>
          <div class="skill"><span>HTML5 / CSS3</span><span>95%</span><div class="bar"><i data-fill="95"></i></div></div>
          <div class="skill"><span>JavaScript (ES+)</span><span>90%</span><div class="bar"><i data-fill="90"></i></div></div>
          <div class="skill"><span>React / Vue</span><span>80%</span><div class="bar"><i data-fill="80"></i></div></div>
        </div>
        <div class="card">
          <h3>Backend</h3>
          <div class="skill"><span>Node / Express</span><span>80%</span><div class="bar"><i data-fill="80"></i></div></div>
          <div class="skill"><span>PHP / Laravel</span><span>75%</span><div class="bar"><i data-fill="75"></i></div></div>
          <div class="skill"><span>REST / Auth</span><span>85%</span><div class="bar"><i data-fill="85"></i></div></div>
        </div>
        <div class="card">
          <h3>Outils</h3>
          <div class="skill"><span>Git & GitHub</span><span>85%</span><div class="bar"><i data-fill="85"></i></div></div>
          <div class="skill"><span>Docker (bases)</span><span>60%</span><div class="bar"><i data-fill="60"></i></div></div>
          <div class="skill"><span>CI/CD (bases)</span><span>55%</span><div class="bar"><i data-fill="55"></i></div></div>
        </div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" data-reveal>
      <div class="section-title"><span class="dot"></span><h2>Projets</h2></div>
      <div class="filters" role="tablist" aria-label="Filtrer les projets">
        <div class="chip active" data-filter="all" role="tab" aria-selected="true">Tous</div>
        <div class="chip" data-filter="web" role="tab">Web</div>
        <div class="chip" data-filter="mobile" role="tab">Mobile</div>
        <div class="chip" data-filter="autre" role="tab">Autre</div>
      </div>

      <div class="cards" id="projectGrid">
        <article class="card project" data-cat="web">
          <img src="https://images.unsplash.com/photo-1522075469751-3a6694fb2f61?q=80&w=1200&auto=format&fit=crop" alt="Capture du projet Parc Informatique" />
          <div class="info">
            <h3>Gestion du Parc Informatique</h3>
            <p>Application web pour l’Hôpital Cheiko: enregistrement du matériel (réf., séries, localisation), inventaire et suivi.</p>
            <div class="tags"><span class="tag">Laravel</span><span class="tag">MySQL</span><span class="tag">Tailwind</span></div>
            <div class="actions">
              <button class="btn" data-open-browser data-url="https://tailwindcss.com/">Aperçu</button>
              <button class="btn ghost" data-code>Code</button>
            </div>
          </div>
        </article>

        <article class="card project" data-cat="mobile">
          <img src="https://images.unsplash.com/photo-1498050108023-c5249f4df085?q=80&w=1200&auto=format&fit=crop" alt="Capture app mobile" />
          <div class="info">
            <h3>App Mobile Services</h3>
            <p>Prototype d’app pour réservation de services locaux avec notifications et chat.</p>
            <div class="tags"><span class="tag">Flutter</span><span class="tag">Firebase</span></div>
            <div class="actions">
              <button class="btn" data-open-browser data-url="https://flutter.dev/">Aperçu</button>
              <button class="btn ghost" data-code>Code</button>
            </div>
          </div>
        </article>

        <article class="card project" data-cat="web">
          <img src="https://images.unsplash.com/photo-1521737604893-d14cc237f11d?q=80&w=1200&auto=format&fit=crop" alt="Capture tableau de bord" />
          <div class="info">
            <h3>Dashboard Analytique</h3>
            <p>Tableau de bord KPI en temps réel: graphiques, filtres et export CSV.</p>
            <div class="tags"><span class="tag">React</span><span class="tag">Node</span></div>
            <div class="actions">
              <button class="btn" data-open-browser data-url="https://recharts.org/en-US/">Aperçu</button>
              <button class="btn ghost" data-code>Code</button>
            </div>
          </div>
        </article>

        <article class="card project" data-cat="autre">
          <img src="https://images.unsplash.com/photo-1556157382-97eda2d62296?q=80&w=1200&auto=format&fit=crop" alt="Automatisation" />
          <div class="info">
            <h3>Automatisation Scripts</h3>
            <p>Scripts d’automatisation pour déploiement et backups sécurisés.</p>
            <div class="tags"><span class="tag">Bash</span><span class="tag">CI/CD</span></div>
            <div class="actions">
              <button class="btn" data-open-browser data-url="https://crontab.guru/">Aperçu</button>
              <button class="btn ghost" data-code>Code</button>
            </div>
          </div>
        </article>
      </div>

      <!-- Mini navigateur intégré -->
      <div class="browser" data-reveal>
        <div class="bar">
          <button class="btn" id="backBtn" title="Précédent">⟵</button>
          <button class="btn" id="forwardBtn" title="Suivant">⟶</button>
          <input type="url" id="address" placeholder="https:// …" />
          <button class="btn primary" id="goBtn">Aller</button>
        </div>
        <iframe id="preview" sandbox="allow-scripts allow-forms allow-same-origin" title="Aperçu du projet"></iframe>
      </div>
    </section>

    <!-- TIMELINE / ÉDUCATION -->
    <section id="timeline" data-reveal>
      <div class="section-title"><span class="dot"></span><h2>Parcours</h2></div>
      <div class="timeline">
        <div class="t-item">
          <h3>Licence en Génie Informatique (Programmation)</h3>
          <div class="kicker">Institut Africain de Djibouti</div>
          <p>Conception logicielle, structures de données, développement web et mobile, bases de données, sécurité et projets pratiques.</p>
        </div>
        <div class="t-item">
          <h3>Stage / Missions</h3>
          <div class="kicker">Développement d’outils internes & automatisation</div>
          <p>Participation à la mise en place de plateformes et d’APIs, intégrations, optimisation des performances.</p>
        </div>
      </div>
    </section>

    <!-- AVIS DES VISITEURS -->
    <section id="reviews" data-reveal>
      <div class="section-title"><span class="dot"></span><h2>Avis des visiteurs</h2></div>
      <div class="avg"><strong id="avgText">Aucun avis pour l’instant</strong> <span id="avgStars" class="note"></span></div>
      <div class="reviews-list" id="reviewsList" aria-live="polite"></div>

      <form id="reviewForm" class="review-form" autocomplete="off">
        <div class="stars" aria-label="Note">
          <button type="button" data-star="1" aria-label="1 étoile">☆</button>
          <button type="button" data-star="2" aria-label="2 étoiles">☆</button>
          <button type="button" data-star="3" aria-label="3 étoiles">☆</button>
          <button type="button" data-star="4" aria-label="4 étoiles">☆</button>
          <button type="button" data-star="5" aria-label="5 étoiles">☆</button>
        </div>
        <input name="name" placeholder="Votre nom" required />
        <textarea name="comment" placeholder="Votre avis" required></textarea>
        <button class="btn primary" type="submit">Publier l’avis</button>
      </form>
      <small class="kicker">Les avis sont stockés localement dans votre navigateur (localStorage).</small>
    </section>

    <!-- CONTACT -->
    <section id="contact" data-reveal>
      <div class="section-title"><span class="dot"></span><h2>Contact</h2></div>
      <p>N’hésitez pas à m’écrire. Je réponds rapidement.</p>
      <form id="contactForm">
        <input name="name" placeholder="Votre nom" required aria-label="Votre nom" />
        <input type="email" name="email" placeholder="Votre email" required aria-label="Votre email" />
        <textarea name="message" placeholder="Votre message" required aria-label="Votre message"></textarea>
        <button class="btn primary" type="submit">Envoyer par email</button>
      </form>
    </section>

    <button id="toTop" class="btn" aria-label="Remonter en haut">⬆</button>
  </main>

  <footer class="container">
    <small>© <span id="year"></span> Abdisalam Houssein Ibrahim — Tous droits réservés.</small>
    <small>Thème: rouge • noir • blanc — Animations fluides.</small>
  </footer>

  <!-- Dialog "Code" protégé -->
  <dialog id="viewer"><div class="lightbox">
    <div class="top"><strong>Accès au code</strong><button class="btn ghost" id="closeViewer">Fermer</button></div>
    <div style="padding:16px;max-width:520px">
      <p>Le code source de ce projet est <strong>privé</strong>. Pour obtenir l’accès, veuillez me contacter sur WhatsApp :</p>
      <p><a class="btn primary" href="https://wa.me/25377298953" target="_blank" rel="noopener">Me contacter sur WhatsApp</a></p>
      <p class="kicker">Merci pour votre compréhension 🙏</p>
    </div>
  </div></dialog>

  <script>
    /* ==================== Utilitaires ==================== */
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => [...root.querySelectorAll(sel)];

    /* ==================== Typing effect ==================== */
    const roles=[
      "Développeur Web / Mobile",
      "Full‑Stack (Laravel, React)",
      "Créateur d'UX animée",
      "Disponible pour vos projets"
    ];
    let i=0, j=0, del=false; const typingEl = document.getElementById('typing');
    function tick(){
      const word = roles[i];
      typingEl.textContent = word.slice(0, j);
      if(!del && j < word.length){ j++; }
      else if(!del && j === word.length){ del = true; }
      else if(del && j>0){ j--; }
      else{ del=false; i=(i+1)%roles.length; }
      setTimeout(tick, del?60:90);
    }
    tick();

    /* ==================== Scroll reveal ==================== */
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(e=>{ if(e.isIntersecting){ e.target.classList.add('visible'); io.unobserve(e.target); } });
    }, {threshold:.1});
    $$('[data-reveal]').forEach(el=>io.observe(el));

    /* ==================== Bars animation ==================== */
    $$('.bar i').forEach(iEl=>{
      const val = iEl.getAttribute('data-fill');
      setTimeout(()=>{ iEl.style.width = val+'%'; }, 400);
    });

    /* ==================== Tilt effet 3D sur l'avatar ==================== */
    const tilt = document.getElementById('tilt');
    tilt.addEventListener('mousemove', (e)=>{
      const r = tilt.getBoundingClientRect();
      const x = (e.clientX - r.left)/r.width - .5;
      const y = (e.clientY - r.top)/r.height - .5;
      tilt.style.transform = `rotateY(${x*10}deg) rotateX(${ -y*10 }deg)`;
    });
    tilt.addEventListener('mouseleave', ()=> tilt.style.transform = 'rotateY(0) rotateX(0)');

    /* ==================== Upload avatar (local) ==================== */
    const avatar = document.getElementById('avatar');
    const fileInput = document.getElementById('fileInput');
    avatar.addEventListener('click', ()=> fileInput.click());
    fileInput.addEventListener('change', (e)=>{
      const file = e.target.files?.[0];
      if(!file) return;
      const reader = new FileReader();
      reader.onload = () => avatar.src = reader.result;
      reader.readAsDataURL(file);
    });

    /* ==================== WhatsApp & CV ==================== */
    document.getElementById('whatsBtn').addEventListener('click', ()=>{
      window.open('https://wa.me/25377298953','_blank');
    });

    /* ==================== Projets : filtres ==================== */
    const chips = $$('.chip');
    chips.forEach(ch=> ch.addEventListener('click', ()=>{
      chips.forEach(c=> c.classList.remove('active'));
      ch.classList.add('active');
      const f = ch.dataset.filter;
      $$('#projectGrid .project').forEach(p=>{
        p.style.display = (f==='all' || p.dataset.cat===f)? 'block':'none';
      });
    }));

    /* ==================== Code protégé (dialog) ==================== */
    const dialog = document.getElementById('viewer');
    const closeViewer = document.getElementById('closeViewer');
    $$('[data-code]').forEach(btn=> btn.addEventListener('click', ()=> dialog.showModal()));
    closeViewer.addEventListener('click', ()=> dialog.close());

    /* ==================== Mini navigateur intégré ==================== */
    const iframe = document.getElementById('preview');
    const address = document.getElementById('address');
    const backBtn = document.getElementById('backBtn');
    const forwardBtn = document.getElementById('forwardBtn');
    const goBtn = document.getElementById('goBtn');
    let historyStack = [], cursor = -1;

    function load(url){
      if(!/^https?:\/\//i.test(url)) url = 'https://' + url;
      iframe.src = url; address.value = url;
      historyStack = historyStack.slice(0, cursor+1);
      historyStack.push(url); cursor++;
      updateNav();
    }
    function updateNav(){
      backBtn.disabled = cursor<=0; forwardBtn.disabled = cursor>=historyStack.length-1;
    }
    goBtn.addEventListener('click', ()=> load(address.value.trim()));
    address.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ e.preventDefault(); load(address.value.trim()); }});
    backBtn.addEventListener('click', ()=>{ if(cursor>0){ cursor--; iframe.src = historyStack[cursor]; address.value = historyStack[cursor]; updateNav(); }});
    forwardBtn.addEventListener('click', ()=>{ if(cursor<historyStack.length-1){ cursor++; iframe.src = historyStack[cursor]; address.value = historyStack[cursor]; updateNav(); }});

    $$('[data-open-browser]').forEach(b=> b.addEventListener('click', ()=> load(b.dataset.url)));

    /* ==================== Avis (localStorage) ==================== */
    const LS_KEY = 'ahi_reviews_v1';
    const form = document.getElementById('reviewForm');
    const list = document.getElementById('reviewsList');
    const avgText = document.getElementById('avgText');
    const avgStars = document.getElementById('avgStars');
    let currentNote = 0;

    // étoiles sélection
    $$('#reviewForm .stars button').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        currentNote = +btn.dataset.star;
        $$('#reviewForm .stars button').forEach((b,idx)=> b.textContent = (idx < currentNote)? '★':'☆');
      });
    });

    function readReviews(){
      try{ return JSON.parse(localStorage.getItem(LS_KEY)) || []; }catch{ return []; }
    }
    function saveReviews(arr){ localStorage.setItem(LS_KEY, JSON.stringify(arr)); }

    function renderReviews(){
      const data = readReviews();
      list.innerHTML = '';
      if(!data.length){ avgText.textContent = 'Aucun avis pour l’instant'; avgStars.textContent=''; return; }
      let sum = 0;
      data.forEach(r=>{ sum+= r.note; list.appendChild(reviewItem(r)); });
      const avg = (sum/data.length).toFixed(1);
      avgText.textContent = `Moyenne ${avg}/5 · ${data.length} avis`;
      avgStars.textContent = '★'.repeat(Math.round(avg)) + '☆'.repeat(5-Math.round(avg));
    }

    function reviewItem({name, comment, note, ts}){
      const d = new Date(ts);
      const el = document.createElement('div');
      el.className = 'review-item';
      el.innerHTML = `<strong>${name}</strong> · <span class="note">${'★'.repeat(note)}${'☆'.repeat(5-note)}</span><br><small class="kicker">${d.toLocaleDateString()} ${d.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</small><p style="margin:.5rem 0 0 0">${comment}</p>`;
      return el;
    }

    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const fd = new FormData(form);
      const name = (fd.get('name')||'').toString().trim();
      const comment = (fd.get('comment')||'').toString().trim();
      if(!currentNote){ alert('Choisissez une note en étoiles.'); return; }
      if(!name || !comment){ alert('Merci de remplir votre nom et votre avis.'); return; }
      const entry = {name, comment, note: currentNote, ts: Date.now()};
      const arr = readReviews();
      arr.unshift(entry); // plus récent en premier
      saveReviews(arr);
      form.reset(); currentNote = 0; $$('#reviewForm .stars button').forEach(b=> b.textContent='☆');
      renderReviews();
      confetti();
    });

    // Confetti minimaliste
    function confetti(){
      const n=20; const frag=document.createDocumentFragment();
      for(let k=0;k<n;k++){
        const s=document.createElement('span'); s.textContent='✦'; s.style.position='fixed'; s.style.left=(Math.random()*100)+'%'; s.style.top='-10px'; s.style.fontSize=(12+Math.random()*16)+'px'; s.style.transition='transform 1.2s ease, opacity 1.2s ease'; s.style.opacity='1'; document.body.appendChild(s);
        requestAnimationFrame(()=>{
          s.style.transform=`translateY(${80+Math.random()*120}vh) rotate(${Math.random()*360}deg)`; s.style.opacity='0';
        });
        setTimeout(()=> s.remove(), 1400);
      }
    }

    renderReviews();

    /* ==================== Contact form (mailto:) ==================== */
    document.getElementById('contactForm').addEventListener('submit', (e)=>{
      e.preventDefault();
      const fd = new FormData(e.target);
      const subject = encodeURIComponent('Contact Portfolio — '+fd.get('name'));
      const body = encodeURIComponent(`Nom: ${fd.get('name')}\nEmail: ${fd.get('email')}\n\nMessage:\n${fd.get('message')}`);
      window.location.href = `mailto:abdisalamhoussein771@gmail.com?subject=${subject}&body=${body}`;
    });

    /* ==================== Divers ==================== */
    // back to top
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', ()=>{ toTop.style.display = window.scrollY>400? 'inline-flex':'none'; });
    toTop.addEventListener('click', ()=> window.scrollTo({top:0, behavior:'smooth'}));

    // année dynamique
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
